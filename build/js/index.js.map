{"version":3,"sources":["index.js"],"names":["clear","document","querySelector","accessories","deleteProd","products","total","table","cardsShopping","accumulated__price","cargarListener","addEventListener","deleteProduct","clearCar","JSON","parse","localStorage","getItem","carShoppingTable","addProduct","e","target","classList","contains","readProduct","parentElement","productFound","product","id","getAttribute","name","textContent","image","src","quantity","price","discount","some","prod","productsUpdated","map","result","forEach","unitPrice","parseInt","split","row","createElement","innerHTML","appendChild","syncStorage","setItem","stringify","filter","firstChild","removeChild"],"mappings":"AACA,IAAIA,MAAQC,SAASC,cAAc,oBAC/BC,YAAcF,SAASC,cAAc,gBACrCE,WAAaH,SAASC,cAAc,YACpCG,SAAS,GACTC,MAAQL,SAASC,cAAc,oBAE/BK,MAAQN,SAASC,cAAc,0BAE/BM,cAAgBP,SAASC,cAAc,kBACvCO,mBAAqBR,SAASC,cAAc,uBAIhD,SAASQ,iBAGLH,MAAMI,iBAAiB,QAASC,eAEhCZ,MAAMW,iBAAiB,QAAQ,KAC3BN,SAAS,GACTQ,aAIJZ,SAASU,iBAAiB,mBAAmB,KAGrCN,SADDS,KAAKC,MAAMC,aAAaC,QAAQ,aACpBH,KAAKC,MAAMC,aAAaC,QAAQ,aAEhC,GAEfC,qBAIJf,YAAYQ,iBAAiB,QAASQ,YAG1C,SAASA,WAAWC,GAChB,IAAGA,EAAEC,OAAOC,UAAUC,SAAS,gBAI3B,OAAO,EAFPC,YADcJ,EAAEC,OAAOI,cAAcA,eAO7C,SAASD,YAAYE,GAEjB,IAAIC,EAAQ,CACRC,GAAGF,EAAaxB,cAAc,iBAAiB2B,aAAa,WAC5DC,KAAKJ,EAAaxB,cAAc,SAAS6B,YACzCC,MAAMN,EAAaxB,cAAc,OAAO+B,IACxCC,SAAS,EACTC,MAAMT,EAAaxB,cAAc,YAAY6B,YAC7CK,SAAUV,EAAaxB,cAAc,WAAW6B,aAKpD,GAFgB1B,SAASgC,KAAKC,GAAQA,EAAKV,KAAOD,EAAQC,IAEhD,CACN,MAAMW,EAAkBlC,SAASmC,IAAKF,GAC9BA,EAAKV,KAAOD,EAAQC,IACpBU,EAAKJ,WACEI,GAEAA,GAGfjC,SAAW,IAAIkC,QAGflC,SAAU,IAAIA,SAAUsB,GAI5BT,mBAIJ,SAASA,mBAELL,WAEA,IAAI4B,EAAS,EAIbpC,SAASqC,QAAQf,IACb,MAAMK,MAACA,EAAKG,MAAEA,EAAKP,GAACA,EAAEM,SAACA,EAAQJ,KAACA,GAAQH,EAClCgB,EAAYC,SAAST,EAAMU,MAAM,KAAK,IAE5CJ,GAAQE,EAAUT,EAClB,MAAMY,EAAM7C,SAAS8C,cAAc,MACnCD,EAAIE,UAAU,+BAERlB,yDAGUE,iEAGVE,kDAGGS,EAAWT,qGAGuCN,oCAG3DrB,MAAM0C,YAAYH,GAClBxC,MAAMyB,YAAc,KAAKU,IAI7BS,cAGJ,SAASA,cACLlC,aAAamC,QAAQ,WAAWrC,KAAKsC,UAAU/C,WAMnD,SAASO,cAAcQ,GACnB,GAAGA,EAAEC,OAAOC,UAAUC,SAAS,YAAY,CACvC,MAAMK,EAAKR,EAAEC,OAAOQ,aAAa,WAEjCxB,SAAWA,SAASgD,OAAOf,GAAQA,EAAKV,KAAOA,GAE/CV,oBAIR,SAASL,WACL,KAAMN,MAAM+C,YACR/C,MAAMgD,YAAYhD,MAAM+C,YAG5BtC,aAAamC,QAAQ,WAAW,IAChC7C,MAAMyB,YAAY,GAlItBrB","file":"index.js","sourcesContent":["\nlet clear = document.querySelector(\".products__clear\");\nlet accessories = document.querySelector(\".accessories\");\nlet deleteProd = document.querySelector(\"delete-p\");\nlet products=[];\nlet total = document.querySelector(\".products__total\");\n\nlet table = document.querySelector(\".products__table tbody\");\n\nlet cardsShopping = document.querySelector(\".cardsShopping\");\nlet accumulated__price = document.querySelector(\".accumulated__price\");\n\n//eventListener\ncargarListener();\nfunction cargarListener(){\n\n\n    table.addEventListener(\"click\", deleteProduct);\n\n    clear.addEventListener(\"click\",()=>{\n        products=[];\n        clearCar();\n    } )\n\n    //Mostrar productos del localStorage\n    document.addEventListener(\"DOMContentLoaded\",()=>{\n        //products = JSON.parse(localStorage.getItem('products')) || [];\n        if(JSON.parse(localStorage.getItem('products'))){\n            products = JSON.parse(localStorage.getItem('products'));\n        }else{\n            products = [];\n        }\n        carShoppingTable();\n\n    })\n\n    accessories.addEventListener(\"click\", addProduct);\n}\n\nfunction addProduct(e){\n    if(e.target.classList.contains('fa-cart-plus')){\n        let product = e.target.parentElement.parentElement;\n        readProduct(product);\n    }else{\n        return false;\n    }\n}\n\nfunction readProduct(productFound){\n    //console.log(productFound.querySelector(\".accessory\"));\n    let product={\n        id:productFound.querySelector(\".fa-cart-plus\").getAttribute(\"data-id\"),\n        name:productFound.querySelector(\".name\").textContent,\n        image:productFound.querySelector(\"img\").src,\n        quantity:1,\n        price:productFound.querySelector(\".success\").textContent,\n        discount: productFound.querySelector(\".delete\").textContent\n    }\n\n    const verify =  products.some(prod => prod.id === product.id)\n\n    if(verify){\n        const productsUpdated = products.map((prod)=>{\n            if( prod.id === product.id ){\n                prod.quantity++\n                return prod;\n            }else{\n                return prod;\n            }\n        })\n        products = [...productsUpdated];\n        \n    }else{\n        products= [...products, product];\n    }\n\n    \n    carShoppingTable();\n    \n}\n\nfunction carShoppingTable(){\n\n    clearCar();\n    \n    let result = 0;\n    //console.log(typeof productsStorage);\n    \n   \n    products.forEach(product =>{\n        const {image, price,id,quantity,name} = product;\n        const unitPrice = parseInt(price.split(\"$\")[1]);\n        \n        result+=unitPrice*quantity;\n        const row = document.createElement('tr');\n        row.innerHTML=`\n        <td>\n            ${name}\n        </td>\n        <td>\n            <img src='${image}' width='50px'>   \n        </td>\n        <td>\n            ${quantity}\n        </td>\n        <td>\n            $$ ${unitPrice* quantity} \n        </td>\n        <td>\n            <i class=\"delete-p fa-solid fa-circle-xmark\" data-id=${id}></i>\n        </td>  \n        `\n        table.appendChild(row);\n        total.textContent = \"$$\"+result;\n    })\n\n    //Agregar localstorage\n    syncStorage();    \n}\n\nfunction syncStorage(){\n    localStorage.setItem(\"products\",JSON.stringify(products));\n}\n\n\n\n\nfunction deleteProduct(e){\n    if(e.target.classList.contains('delete-p')){\n        const id = e.target.getAttribute('data-id')\n        \n        products = products.filter(prod => prod.id !== id)\n\n        carShoppingTable();\n    }\n}\n\nfunction clearCar(){\n    while(table.firstChild){\n        table.removeChild(table.firstChild)\n    }\n    // localStorage.removeItem(\"products\");\n    localStorage.setItem(\"products\",[]);\n    total.textContent=\"\";\n}\n\n\n"]}